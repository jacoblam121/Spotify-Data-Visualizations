
<!DOCTYPE html>
<html>
<head>
    <title>Artist Network - Enhanced D3.js</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow: hidden;
        }
        .container { 
            display: flex; 
            height: 100vh; 
        }
        .sidebar { 
            width: 250px; 
            background: rgba(0,0,0,0.3); 
            padding: 20px; 
            backdrop-filter: blur(10px);
        }
        .main { 
            flex: 1; 
            position: relative; 
        }
        h1 { 
            margin: 0 0 20px 0; 
            font-size: 24px; 
            font-weight: 300; 
        }
        .controls { 
            margin: 20px 0; 
        }
        .control-group { 
            margin: 15px 0; 
        }
        label { 
            display: block; 
            margin-bottom: 5px; 
            font-size: 14px; 
        }
        input[type="range"] { 
            width: 100%; 
            margin: 5px 0; 
        }
        .node { 
            cursor: pointer; 
            transition: all 0.3s ease;
        }
        .node:hover { 
            stroke-width: 4px; 
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.8));
        }
        .link { 
            stroke: rgba(255,255,255,0.4); 
            stroke-opacity: 0.6; 
            transition: all 0.3s ease;
        }
        .link:hover { 
            stroke-opacity: 1; 
            stroke-width: 3px;
        }
        .tooltip { 
            position: absolute; 
            padding: 12px; 
            background: rgba(0,0,0,0.9); 
            color: white; 
            border-radius: 8px; 
            pointer-events: none; 
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
        }
        .genre-legend { 
            margin-top: 20px; 
        }
        .legend-item { 
            display: flex; 
            align-items: center; 
            margin: 8px 0; 
            font-size: 13px;
        }
        .legend-color { 
            width: 16px; 
            height: 16px; 
            border-radius: 50%; 
            margin-right: 10px; 
        }
        svg { 
            width: 100%; 
            height: 100%; 
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h1>ðŸŽµ Artist Network</h1>
            
            <div class="controls">
                <div class="control-group">
                    <label>Force Strength</label>
                    <input type="range" id="forceStrength" min="50" max="500" value="300">
                </div>
                <div class="control-group">
                    <label>Link Distance</label>
                    <input type="range" id="linkDistance" min="50" max="200" value="100">
                </div>
            </div>
            
            <div class="genre-legend">
                <h3>Genres</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff6b6b;"></div>
                    Pop
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #4ecdc4;"></div>
                    Rock
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #a8e6cf;"></div>
                    K-Pop
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ffa726;"></div>
                    Metal
                </div>
            </div>
        </div>
        
        <div class="main">
            <svg></svg>
            <div class="tooltip" style="opacity: 0;"></div>
        </div>
    </div>
    
    <script>
        const nodes = [{"id": "taylor-swift", "name": "taylor swift", "listeners": 5216, "genre": "unknown", "size": 8}, {"id": "paramore", "name": "paramore", "listeners": 3460, "genre": "unknown", "size": 8}, {"id": "iu", "name": "iu", "listeners": 2265, "genre": "unknown", "size": 8}, {"id": "\u30e8\u30eb\u30b7\u30ab", "name": "\u30e8\u30eb\u30b7\u30ab", "listeners": 1282, "genre": "unknown", "size": 8}, {"id": "twice", "name": "twice", "listeners": 1057, "genre": "unknown", "size": 8}, {"id": "aimer", "name": "aimer", "listeners": 885, "genre": "unknown", "size": 8}, {"id": "tonight-alive", "name": "tonight alive", "listeners": 852, "genre": "unknown", "size": 8}, {"id": "ive", "name": "ive", "listeners": 662, "genre": "unknown", "size": 8}, {"id": "blackpink", "name": "blackpink", "listeners": 481, "genre": "unknown", "size": 8}, {"id": "dreamcatcher", "name": "dreamcatcher", "listeners": 462, "genre": "unknown", "size": 8}, {"id": "bring-me-the-horizon", "name": "bring me the horizon", "listeners": 446, "genre": "unknown", "size": 8}, {"id": "anyujin", "name": "anyujin", "listeners": 411, "genre": "unknown", "size": 8}, {"id": "the-killers", "name": "the killers", "listeners": 406, "genre": "unknown", "size": 8}, {"id": "bol4", "name": "bol4", "listeners": 354, "genre": "unknown", "size": 8}, {"id": "the-oral-cigarettes", "name": "the oral cigarettes", "listeners": 323, "genre": "unknown", "size": 8}];
        const links = [{"source": "\u30e8\u30eb\u30b7\u30ab", "target": "\u30e8\u30eb\u30b7\u30ab", "weight": 0.687311}, {"source": "aimer", "target": "\u30e8\u30eb\u30b7\u30ab", "weight": 0.46033}];
        
        const svg = d3.select("svg");
        const width = window.innerWidth - 250;
        const height = window.innerHeight;
        
        svg.attr("width", width).attr("height", height);
        
        // Color scale for genres
        const colorMap = {
            'pop': '#ff6b6b',
            'rock': '#4ecdc4', 
            'k-pop': '#a8e6cf',
            'metal': '#ffa726'
        };
        
        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(100))
            .force("charge", d3.forceManyBody().strength(-300))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collision", d3.forceCollide().radius(d => d.size + 5));
        
        const tooltip = d3.select(".tooltip");
        
        // Create gradient definitions
        const defs = svg.append("defs");
        const gradient = defs.append("radialGradient")
            .attr("id", "nodeGradient");
        gradient.append("stop")
            .attr("offset", "0%")
            .attr("stop-color", "white")
            .attr("stop-opacity", 0.3);
        gradient.append("stop")
            .attr("offset", "100%")
            .attr("stop-color", "white")
            .attr("stop-opacity", 0);
        
        const link = svg.append("g")
            .selectAll("line")
            .data(links)
            .enter().append("line")
            .attr("class", "link")
            .attr("stroke-width", d => Math.sqrt(d.weight) * 4);
        
        const node = svg.append("g")
            .selectAll("circle")
            .data(nodes)
            .enter().append("circle")
            .attr("class", "node")
            .attr("r", d => d.size)
            .attr("fill", d => colorMap[d.genre] || '#gray')
            .attr("stroke", "white")
            .attr("stroke-width", 2)
            .on("mouseover", function(event, d) {
                d3.select(this).attr("fill", "url(#nodeGradient)");
                tooltip.transition().duration(200).style("opacity", 1);
                tooltip.html(`
                    <strong>${d.name}</strong><br/>
                    Listeners: ${d.listeners.toLocaleString()}<br/>
                    Genre: ${d.genre}
                `)
                .style("left", (event.pageX + 10) + "px")
                .style("top", (event.pageY - 40) + "px");
            })
            .on("mouseout", function(event, d) {
                d3.select(this).attr("fill", colorMap[d.genre] || '#gray');
                tooltip.transition().duration(500).style("opacity", 0);
            })
            .on("click", function(event, d) {
                // Center on clicked node
                const transform = d3.zoomIdentity
                    .translate(width / 2 - d.x, height / 2 - d.y)
                    .scale(1.5);
                svg.transition().duration(750)
                    .call(zoom.transform, transform);
            });
        
        const text = svg.append("g")
            .selectAll("text")
            .data(nodes)
            .enter().append("text")
            .text(d => d.name)
            .attr("font-size", "11px")
            .attr("text-anchor", "middle")
            .attr("fill", "white")
            .attr("font-weight", "bold")
            .attr("text-shadow", "1px 1px 2px rgba(0,0,0,0.8)")
            .style("pointer-events", "none");
        
        // Zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 4])
            .on("zoom", function(event) {
                svg.selectAll("g").attr("transform", event.transform);
            });
        
        svg.call(zoom);
        
        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);
            
            node
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);
            
            text
                .attr("x", d => d.x)
                .attr("y", d => d.y + 4);
        });
        
        // Drag functionality
        node.call(d3.drag()
            .on("start", dragstarted)
            .on("drag", dragged)
            .on("end", dragended));
        
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }
        
        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }
        
        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }
        
        // Control handlers
        d3.select("#forceStrength").on("input", function() {
            simulation.force("charge").strength(-this.value);
            simulation.alpha(0.3).restart();
        });
        
        d3.select("#linkDistance").on("input", function() {
            simulation.force("link").distance(this.value);
            simulation.alpha(0.3).restart();
        });
    </script>
</body>
</html>